!function(t){t.fn.baigoUbb=function(e){"use strict";if(this.length<1)return this;var o=t(this),a=o[0],n=t.extend(!0,{menu_selector:".bg-ubb-menu",menu_text:{color:"Color",bgcolor:"Background color",heading:"Heading"},format:{strong:{text:"Bold",icon:"fas fa-bold"},i:{text:"Italic",icon:"fas fa-italic"},u:{text:"Underline",icon:"fas fa-underline"}},color:{aqua:{text:"Aqua",ext:"#333"},black:"Black",blue:"Blue",fuchsia:"Fuchsia",gray:"Gray",green:"Green",lime:{text:"Lime",ext:"#333"},maroon:"Maroon",navy:"Navy",olive:"Olive",purple:"Purple",red:"Red",silver:"Silver",teal:"Teal",white:{text:"White",ext:"#333"},yellow:{text:"Yellow",ext:"#333"}},bgcolor:{aqua:{text:"Aqua",ext:"#000"},black:"Black",blue:"Blue",fuchsia:"Fuchsia",gray:"Gray",green:"Green",lime:{text:"Lime",ext:"#000"},maroon:"Maroon",navy:"Navy",olive:"Olive",purple:"Purple",red:"Red",silver:"Silver",teal:"Teal",white:{text:"White",ext:"#000"},yellow:{text:"Yellow",ext:"#000"}},heading:{h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},dialog:{img:{text:"Image",icon:"fas fa-image",ext:{src:{ignore:!0,label:"image"},img:"alt"}},url:{text:"Link",icon:"fas fa-link",ext:{href:{label:"Link"},url:"text"}}},single:{hr:{text:"Horizontal rule",icon:"fas fa-minus"},br:{text:"Break line",icon:"fas fa-paragraph"}}},e),i='<div class="bg-ubb-menu mb-2"><div class="btn-toolbar"><div class="btn-group btn-group-sm mr-2 bg-ubb-format"></div><div class="btn-group btn-group-sm mr-2"><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.heading+'</button><div class="dropdown-menu bg-ubb-heading"></div></div><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.color+'</button><div class="dropdown-menu bg-ubb-color"></div></div><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.bgcolor+'</button><div class="dropdown-menu bg-ubb-bgcolor"></div></div></div><div class="btn-group btn-group-sm mr-2 bg-ubb-dialog"></div><div class="btn-group btn-group-sm bg-ubb-single"></div></div></div>';t(n.menu_selector).length<1&&o.before(i);var l=function(e,o,a){var i="";t.each(e,function(t,e){var o="",n="",l="";switch("string"==typeof e?o=e:"object"==typeof e&&("string"==typeof e.text&&(o=e.text),n="string"==typeof e.icon?'<span class="'+e.icon+'"></span>':o,"string"==typeof e.ext&&(l=e.ext)),i+='<button type="button"',a){case"heading":n="<"+t+">"+o+"</"+t+">",i+=' class="dropdown-item bg-pair" data-tag="'+t+'"';break;case"color":n='<span style="color:'+t+";",l.length>0&&(n+="background-color:"+l+";"),n+='">'+o+"</span>",i+=' class="dropdown-item bg-tag" data-tag="color" data-value="'+t+'"';break;case"bgcolor":l.length<1&&(l="white"),n='<span style="background-color:'+t+";color:"+l+';">'+o+"</span>",i+=' class="dropdown-item bg-tag" data-tag="bgcolor" data-value="'+t+'"';break;case"format":i+=' class="btn btn-outline-secondary bg-pair" data-tag="'+t+'"';break;default:i+=' class="btn btn-outline-secondary bg-'+a+'" data-tag="'+t+'"'}i+=' title="'+o+'">'+n+"</button>"}),t(n.menu_selector+" "+o).html(i)},r={addSingle:function(t){if(void 0!==t&&t.length>0){var e=a.value.length,o=a.selectionStart,n=a.selectionEnd;a.value=a.value.substring(0,o)+"["+t+"]"+a.value.substring(n,e)}},addPair:function(t){if(void 0!==t&&t.length>0){var e=a.value.length,o=a.selectionStart,n=a.selectionEnd,i=a.value.substring(o,n);if(i.length>0){var l="["+t+"]"+i+"[/"+t+"]";a.value=a.value.substring(0,o)+l+a.value.substring(n,e)}}},addTag:function(t,e){if(void 0!==t&&t.length>0){var o=a.value.length,n=a.selectionStart,i=a.selectionEnd,l=a.value.substring(n,i);if(l.length>0){var r="["+t;"string"==typeof e&&e.length>0?r+="="+e+"]":r+="]",r+=l+"[/"+t+"]",a.value=a.value.substring(0,n)+r+a.value.substring(i,o)}}},insertTag:function(e,o){var i=a.value.length,l=a.selectionStart;if(void 0!==e&&e.length>0&&void 0!==o){var r="["+e;if("object"==typeof o)if(void 0!==o[0]&&o[0].length>0&&"string"==typeof o[0]&&void 0!==o[1]&&o[1].length>0&&"string"==typeof o[1])r+="="+o[0]+"]"+o[1];else if(void 0!==o[0]&&o[0].length>0&&"string"==typeof o[0])r+="]"+o[0];else{var g="",s="]";t.each(o,function(t,o){"string"==typeof o&&"string"==typeof t&&(t==e?s="]"+o:void 0!==n.dialog[e].ext[t].ignore&&1==n.dialog[e].ext[t].ignore?g+="="+o:g+=" "+t+"="+o)}),r+=g+s}else"string"==typeof o&&(r+="]"+o);r+="[/"+e+"]",a.value=a.value.substring(0,l)+r+a.value.substring(l,i)}}};return l(n.format,".bg-ubb-format","format"),l(n.heading,".bg-ubb-heading","heading"),l(n.color,".bg-ubb-color","color"),l(n.bgcolor,".bg-ubb-bgcolor","bgcolor"),l(n.dialog,".bg-ubb-dialog","dialog"),l(n.single,".bg-ubb-single","single"),o.keyup(function(t){13==t.keyCode&&r.addSingle("br")}),t(n.menu_selector).on("click",".bg-pair",function(){var e=t(this).data("tag");r.addPair(e)}),t(n.menu_selector).on("click",".bg-single",function(){var e=t(this).data("tag");r.addSingle(e)}),t(n.menu_selector).on("click",".bg-tag",function(){var e=t(this).data("tag"),o=t(this).data("value");r.addTag(e,o)}),t(n.menu_selector).on("click",".bg-dialog",function(){var e=t(this).data("tag");if(void 0!==n.dialog[e]){if("string"==typeof n.dialog[e])var o=n.dialog[e];else if("object"==typeof n.dialog[e])if("object"==typeof n.dialog[e].ext||"string"==typeof n.dialog[e].ext)o=n.dialog[e].ext;else if("string"==typeof n.dialog[e].text)o=n.dialog[e].text;if(void 0!==o)t.baigoDialog().input(o,function(t,o){"string"==typeof t&&"ok"==t&&r.insertTag(e,o)})}}),"string"==typeof e&&void 0!==r[e]&&r[e].apply(this,Array.prototype.slice.call(arguments,1)),r}}(jQuery);