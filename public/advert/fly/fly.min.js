!function(e){e.fn.adsFly=function(t){"use strict";var o,a,s,i=e(this),n=0,d=0,c=e.extend({data_url:"",selector:{btn_close:".btn-close",box:".fly-child"},class_name:{btn_close:"btn-close",box:"fly-child",img:"fly-child-img"},speed:15,pos_x:0,pos_y:0,loading:"Loading..."},t),l=c.pos_x,r=c.pos_y,f=function(){o=e(window).width()-i.find(c.selector.box).width(),a=e(window).height()-i.find(c.selector.box).height(),0===n&&(r+=1,i.find(c.selector.box).css({left:r}),r>=o&&(r=o,n=1)),1==n&&(r-=1,i.find(c.selector.box).css({left:r}),r<=0&&(n=0)),0===d&&(l+=1,i.find(c.selector.box).css({top:l}),l>=a&&(l=a,d=1)),1==d&&(l-=1,i.find(c.selector.box).css({top:l}),l<=0&&(d=0))};s=c.data_url.indexOf("?")>0?"&":"?",e.ajax({url:c.data_url+s+(new Date).getTime()+"at"+Math.random(),type:"get",dataType:"jsonp",data:"",beforeSend:function(){i.html('<div class="'+c.class_name.box+'">'+c.loading+"</div>")},success:function(t){if(void 0!==t.posiRow&&void 0!==t.advertRows[0]){var o,a=t.posiRow,s=t.advertRows[0],n=s.attachRow,d=c;void 0!==a.posi_opts&&(d=e.extend(d,a.posi_opts));var l=setInterval(f,d.speed);i.find(c.selector.box).hover(function(){clearInterval(l)},function(){l=setInterval(f,d.speed)}),void 0!==s.advert_href&&(o=s.advert_href);var r='<div><a href="'+o+'" target="_blank">'+(void 0!==s.attachRow.attach_url?'<img src="'+n.attach_url+'" class="'+c.class_name.img+'" id="posi-'+a.posi_id+"-attach-"+n.attach_id+'" alt="'+s.advert_name+'" title="'+s.advert_name+'">':void 0!==s.advert_content?s.advert_content:s.advert_name)+'</a></div><div class="'+c.class_name.btn_close+'"><a href="javascript:void(0);">&times; '+a.posi_close+"</a></div>";i.find(c.selector.box).html(r),i.find(c.selector.box).on("click",c.selector.btn_close,function(){i.find(c.selector.box).hide()})}}})}}(jQuery);